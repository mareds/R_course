<!DOCTYPE html>
<html>
<head>
  <title>Data Analysis with R</title>
  <meta charset="utf-8">
  <meta name="description" content="Data Analysis with R">
  <meta name="author" content="Saskia A. Otto">
  <meta name="generator" content="slidify" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <!-- the following meta tag added by me (SAO) -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/default.css" media="all" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/phone.css"
    media="only screen and (max-device-width: 480px)" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/slidify.css" >
  <link rel="stylesheet" href="libraries/highlighters/highlight.js/css/sao_theme.css" />
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->  <link rel=stylesheet href="libraries/widgets/quiz/css/demo.css"></link>
<link rel=stylesheet href="libraries/widgets/bootstrap/css/bootstrap.css"></link>
<link rel=stylesheet href="libraries/widgets/interactive/css/aceeditor.css"></link>
<link rel=stylesheet href="./assets/css/box_styles.css"></link>
<link rel=stylesheet href="./assets/css/ribbons.css"></link>
<link rel=stylesheet href="./assets/css/style.css"></link>


  <!-- Grab CDN jQuery, fall back to local if offline -->
  <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
  <script>window.jQuery || document.write('<script src="libraries/widgets/quiz/js/jquery.js"><\/script>')</script>
  <script data-main="libraries/frameworks/io2012/js/slides"
    src="libraries/frameworks/io2012/js/require-1.0.8.min.js">
  </script>

  

</head>
<body style="opacity: 0">
  <slides class="layout-widescreen">

    <!-- LOGO SLIDE -->
      <slide class="nobackground">
    <article class="flexbox vcenter">
      <span>
        <img width='500px' src="assets/img/BigLogo_MDS.png">
      </span>
    </article>
  </slide>
    <slide class="title-slide segue nobackground">
  <!-- <aside class="gdbar">
    <img src="assets/img/uham_logo.png">
  </aside>-->
  <div style="position: absolute; left: 50px; top: 50px; z-index:100">
      <img src = "assets/img/uham_logo.png" height="67" width="200">
  </div>
  <hgroup class="auto-fadein">
    <h1>Data Analysis with R</h1>
    <h2>6 - Data wrangling - 2.Tidy Data</h2>
    <p>Saskia A. Otto<br/>Postdoctoral Researcher</p>
  </hgroup>
  <article></article>
</slide>


    <!-- SLIDES -->
    <slide class="segue" style="background:#1874CD;">
  <hgroup>
    <h1>2. Tidy data</h1>
  </hgroup>
  <article>
    <p><img src="img/Data_science_1a.png" style="height:150px;border:0;position: absolute; left: 900px; top: 50px"> </img> </p>

<p><a href="http://r4ds.had.co.nz/wrangle-intro.html">
  <img src="img/Data_wrangling_b.png" alt="Data wrangling - Tidy data"    style="width:400px;border:0;position: absolute; left: 125px; top: 150px"></img> 
</a> </p>

  </article>
</slide>
<slide class="" id="slide-2" style="background:;">
  <hgroup>
    <h2>So what is &quot;tidy&quot; data?</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>A way to <strong>organize tabular</strong> data</li>
</ul>

    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-3" style="background:;">
  <hgroup>
    <h2>So what is &quot;tidy&quot; data?</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>A way to <strong>organize tabular</strong> data</li>
</ul>

<div class="img-with-text" style="position: absolute; left: 200px; top: 200px">
    <img src="img/Tidy_data_1.png" alt="" width=700px/>
 <p><span class="source-img" style = "float:right">source: 
  <a href='https://github.com/rstudio/cheatsheets/raw/master/data-import.pdf' title=''>Data Import</a> cheat sheet (licensed under CC-BY-SA)</span></p>
</div>

    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-4" style="background:;">
  <hgroup>
    <h2>So what is &quot;tidy&quot; data?</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>A way to <strong>organize tabular</strong> data</li>
<li>Provides a <strong>consistent</strong> data structure across packages.</li>
<li>Is <strong>easy</strong> to aggregate, visualise and model (i.e. works well with dplyr, ggplot, and lm)</li>
<li>Complements R’s <strong>vectorized operations</strong> --&gt; R will automatically preserve observations as you manipulate variables.</li>
</ul>

    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-5" style="background:;">
  <hgroup>
    <h2>So what is &quot;tidy&quot; data?</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>A way to <strong>organize tabular</strong> data</li>
<li>Provides a <strong>consistent</strong> data structure across packages.</li>
<li>Is <strong>easy</strong> to aggregate, visualise and model (i.e. works well with dplyr, ggplot, and lm)</li>
<li>Complements R’s <strong>vectorized operations</strong> --&gt; R will automatically preserve observations as you manipulate variables.</li>
</ul>

<div class="img-with-text" style="position: absolute; left: 250px; top: 365px">
    <img src="img/Tidy_data_2.png" alt="" width=600px/>
 <p><span class="source-img" style = "float:right">source: 
  <a href='https://github.com/rstudio/cheatsheets/raw/master/data-import.pdf' title=''>Data Import</a> cheat sheet (licensed under CC-BY-SA)</span></p>
</div>

    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-6" style="background:;">
  <hgroup>
    <h2>So what is &quot;tidy&quot; data?</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>A way to <strong>organize tabular</strong> data</li>
<li>Provides a <strong>consistent</strong> data structure across packages.</li>
<li>Is <strong>easy</strong> to aggregate, visualise and model (i.e. works well with dplyr, ggplot, and lm)</li>
<li>Complements R’s <strong>vectorized operations</strong> --&gt; R will automatically preserve observations as you manipulate variables.</li>
<li>Something than many people have intuitively applied </li>
<li>But Hadley Wickham developed a <strong>whole framework</strong> around this concept and with the tidverse packages, and particularly <strong>&#39;tidyr&#39;</strong>, it is much easier to adopt</li>
</ul>

<p><img src="img/Logo_tidyr.png" title="plot of chunk unnamed-chunk-1" alt="plot of chunk unnamed-chunk-1" width="100px" style="display: block; margin: auto;" /></p>

    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-7" style="background:;">
  <hgroup>
    <h2>Imagine the following crosstabulation</h2>
  </hgroup>
  <article data-timings="">
    <p>This table shows the number of times the 3 fish species were caught in 5 trawls:
<img src="img/Crosstab_1.png" title="plot of chunk unnamed-chunk-2" alt="plot of chunk unnamed-chunk-2" width="500px" style="display: block; margin: auto;" />
How many variables do you see?</p>

<ul class = "build incremental">
<li>You should see <strong>3</strong>:

<ul>
<li>the <strong>species</strong></li>
<li>the <strong>occurence</strong> category with 2 levels</li>
<li>the actual <strong>values</strong> of these 2 levels</li>
</ul></li>
</ul>

    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-8" style="background:;">
  <hgroup>
    <h2>Accessing elements in crosstabulations</h2>
  </hgroup>
  <article data-timings="">
    <p><img src="img/Crosstab_1.png" title="plot of chunk unnamed-chunk-3" alt="plot of chunk unnamed-chunk-3" width="500px" style="display: block; margin: auto;" /></p>

<div style='float:left;width:48%;'>
  <p>How would you access elements, e.g., to</p>

<ul>
<li>get the occurence categories?</li>
<li>get the species list?</li>
<li>get all values in one vector?</li>
</ul>

</div>
<div style='float:right;width:48%;'>
  
</div>
    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-9" style="background:;">
  <hgroup>
    <h2>Accessing elements in crosstabulations</h2>
  </hgroup>
  <article data-timings="">
    <p><img src="img/Crosstab_1.png" title="plot of chunk unnamed-chunk-4" alt="plot of chunk unnamed-chunk-4" width="500px" style="display: block; margin: auto;" /></p>

<div style='float:left;width:48%;'>
  <p>How would you access elements, e.g., to</p>

<ul>
<li>get the occurence categories?</li>
<li>get the species list?</li>
<li>get all values in one vector?</li>
</ul>

</div>
<div style='float:right;width:48%;'>
  <pre><code class="r">names(df)[2:3]
df[1, 2:4]
c( df[1, ], df[2, ], df[3, ])
</code></pre>

<h3>SIMPLE?</h3>

</div>
    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-10" style="background:;">
  <hgroup>
    <h2>Alternatively: Restructure the table</h2>
  </hgroup>
  <article data-timings="">
    <p><img src="img/Crosstab2long.png" title="plot of chunk unnamed-chunk-6" alt="plot of chunk unnamed-chunk-6" width="950px" style="display: block; margin: auto;" /></p>

<div style='float:left;width:48%;'>
  <pre><code class="r">names(df)[2:3]
df[1, 2:4]
c( df[1, ], df[2, ], df[3, ])
</code></pre>

</div>
<div style='float:right;width:48%;'>
  <pre><code class="r">df$occurrences
df$species
df$n
</code></pre>

<h3>Which one do you prefer?</h3>

</div>
    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-11" style="background:;">
  <hgroup>
    <h2>Another example with the hydrographical data from ICES</h2>
  </hgroup>
  <article data-timings="">
    <p>What can be potential issues with such a table?</p>

<div style='float:left;width:48%;'>
  <p><img src="img/Hydro_wide.png" title="plot of chunk unnamed-chunk-9" alt="plot of chunk unnamed-chunk-9" width="400px" style="display: block; margin: auto;" /></p>

</div>
<div style='float:right;width:48%;'>
  
</div>
    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-12" style="background:;">
  <hgroup>
    <h2>Another example with the hydrographical data from ICES</h2>
  </hgroup>
  <article data-timings="">
    <p>What can be potential issues with such a table?</p>

<div style='float:left;width:48%;'>
  <p><img src="img/Hydro_wide.png" title="plot of chunk unnamed-chunk-10" alt="plot of chunk unnamed-chunk-10" width="400px" style="display: block; margin: auto;" /></p>

</div>
<div style='float:right;width:48%;'>
  <ul>
<li>Where should the coordinates per station be added? In an extra table?</li>
<li>Where should the date be added? On top of the station names?</li>
<li>What to do with the other parameters, salinity and oxygen? Different files? </li>
<li>Not clear that the values represent temperature!</li>
</ul>

</div>
    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-13" style="background:;">
  <hgroup>
    <h2>Solution: Restructure the table again</h2>
  </hgroup>
  <article data-timings="">
    <p><img src="img/Hydro_restructured.png" title="plot of chunk unnamed-chunk-11" alt="plot of chunk unnamed-chunk-11" width="800px" style="display: block; margin: auto;" /></p>

    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-14" style="background:;">
  <hgroup>
    <h2>Which one do you consider tidy?</h2>
  </hgroup>
  <article data-timings="">
    
    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-15" style="background:;">
  <hgroup>
    <h2>Which one do you consider tidy?</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>The <strong>&#39;long&#39;</strong> data format is considered more tidy as

<ul>
<li>each observation (here temperature measurement) is in its own row</li>
<li>each variable has its own column → station and temperature are not mixed anymore!</li>
</ul></li>
<li><strong>BUT</strong>: some functions require the data to be in a <strong>wide</strong> format --&gt; you need to adjust your data table in that case</li>
</ul>

    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="segue" style="background:#1E90FF;">
  <hgroup>
    <h1><small>2. Tidy data</small> - How to change between data formats?</h1>
  </hgroup>
  <article>
    <p><img src="img/Data_science_1a.png" style="height:150px;border:0;position: absolute; left: 900px; top: 50px" </img> </p>

  </article>
</slide>
<slide class="" id="slide-17" style="background:;">
  <hgroup>
    <h3>&#39;tidyr&#39; provides two functions for that:</h3>
  </hgroup>
  <article data-timings="">
    <ul>
<li><code>gather()</code> and </li>
<li><code>spread()</code></li>
</ul>

    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-18" style="background:;">
  <hgroup>
    <h3><code>gather()</code></h3>
  </hgroup>
  <article data-timings="">
    <p>Moves column names into a key column, gathering the column values into a single value column.
<img src="img/gather.png" title="plot of chunk unnamed-chunk-12" alt="plot of chunk unnamed-chunk-12" width="900px" style="display: block; margin: auto;" /></p>

    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-19" style="background:;">
  <hgroup>
    <h3><code>spread()</code></h3>
  </hgroup>
  <article data-timings="">
    <p>Moves the unique values of a key column into the column names, spreading the values of a value column across the new columns.
<img src="img/spread.png" title="plot of chunk unnamed-chunk-13" alt="plot of chunk unnamed-chunk-13" width="800px" style="display: block; margin: auto;" /></p>

    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-20" style="background:;">
  <article data-timings="">
    <p>In the R console you would write for the hydrographical example</p>

<pre><code class="r">cruise &lt;- tibble(pressure = 1:5, station_1 = c(14.1,14.0,14.0,13.9,13.8),
  station_2 = c(15.3,15.4,15.2,15.0,14.9))
cruise
# Make tibble long
cruise_long &lt;- gather(cruise, station_1, station_2, key = &quot;station&quot;, value = &quot;temp&quot;)
cruise_long
# Reshape tibble back into wide format
cruise_wide &lt;- spread(cruise_long, station, temp)
cruise_wide # same as cruise!
</code></pre>

<h3>TRY IT YOURSELF!</h3>

    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="segue" style="background:#EEC900;">
  <hgroup>
    <h1>Your turn...</h1>
  </hgroup>
  <article>
    
  </article>
</slide>
<slide class="" id="slide-22">
<hgroup>
  <h1>Quiz 1: Restructuring data formats</h1>
</hgroup>
<article data-timings="">
  <div style="background-color:#F5F5F5; text-align:left; vertical-align: middle; padding:20px 47px;">
    <p>Why are <code>gather()</code> and <code>spread()</code> not perfectly symmetrical?
Carefully consider the following example:</p>

<pre><code class="r">(stocks &lt;- tibble(
  year = c(rep(2014,3), rep(2015, 4), rep(2016,2)),
  quarter = c(2:4, 1:4, 1:2), return = round(rnorm(9, mean = 1, sd = 0.3), 2) ) )
</code></pre>

<pre><code class="no-highlight">## # A tibble: 9 x 3
##    year quarter return
##   &lt;dbl&gt;   &lt;int&gt;  &lt;dbl&gt;
## 1  2014       2   1.45
## 2  2014       3   1.12
## 3  2014       4   0.81
## 4  2015       1   0.34
## 5  2015       2   1.34
## 6  2015       3   0.99
## 7  2015       4   1   
## 8  2016       1   1.28
## 9  2016       2   1.25
</code></pre>

  </div>
  <footer>
    <div style="position: absolute; left: 60px; top: 645px; z-index:100">
      <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
    </div>
    <div style="position: absolute; left: 100px; top: 650px; z-index:100">
      <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
      font-style: italic; top: 610px; ">Data analysis with R</a>
    </div>
  </footer>
</article>
<!-- Presenter Notes -->
</slide>

<style>
#slide-22 {
  background-color: #EEC900;
}
</style>
<slide class="" id="slide-23">
<hgroup>
  <h1>Quiz 1: Restructuring data formats</h1>
</hgroup>
<article data-timings="">
  <div style="background-color:#F5F5F5; text-align:left; vertical-align: middle; padding:20px 47px;">
    <p>Why are <code>gather()</code> and <code>spread()</code> not perfectly symmetrical?
Carefully consider the following example:</p>

<pre><code class="r">(stocks &lt;- tibble(
  year = c(rep(2014,3), rep(2015, 4), rep(2016,2)),
  quarter = c(2:4, 1:4, 1:2), return = round(rnorm(9, mean = 1, sd = 0.3), 2) ) )
</code></pre>

<p>Now lets make the data wide and then long again:</p>

<pre><code class="r">stocks_wide &lt;- spread(stocks, quarter, return)
stocks_long &lt;- gather(stocks_wide, `1`:`4`, key = &quot;quarter&quot;, value = &quot;return&quot;)
</code></pre>

<p>What is the difference between stocks and stocks_long?
(Hint: look also at the variable types and think about column names.)</p>

  </div>
  <footer>
    <div style="position: absolute; left: 60px; top: 645px; z-index:100">
      <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
    </div>
    <div style="position: absolute; left: 100px; top: 650px; z-index:100">
      <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
      font-style: italic; top: 610px; ">Data analysis with R</a>
    </div>
  </footer>
</article>
<!-- Presenter Notes -->
</slide>

<style>
#slide-23 {
  background-color: #EEC900;
}
</style>
<slide class="" id="slide-24" style="background:#EEC900;">
  <hgroup>
    <h1>Quiz 2: Restructuring data formats</h1>
  </hgroup>
  <article data-timings="">
    
<div class="quiz quiz-single well ">
  <p>What is the argument &#39;factor_key&#39; in <code>gather()</code> for?</p>

<ol>
<li><em>determines whether key values will be stored as factors</em></li>
<li>determines whether factors will be also stacked</li>
<li>determines whether all factors in the dataset should be coerced to character values </li>
</ol>

  <button class="quiz-submit btn btn-primary">Submit</button>
  <button class="quiz-toggle-hint btn btn-info">Show Hint</button>
  <button class="quiz-show-answer btn btn-success">Show Answer</button>
  <button class="quiz-clear btn btn-danger">Clear</button>
  
  <div class="quiz-hint">
  <p><small>Read the help documentation <code>?gather</code>.</small></p>

</div>
</div>
    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="segue" style="background:#1E90FF;">
  <hgroup>
    <h1><small>2. Tidy data</small> - Separating and uniting cells</h1>
  </hgroup>
  <article>
    <p><img src="img/Data_science_1a.png" style="height:150px;border:0;position: absolute; left: 900px; top: 50px" </img> </p>

  </article>
</slide>
<slide class="" id="slide-26" style="background:;">
  <article data-timings="">
    <p>Use these functions to split or combine cells into individual, isolated
values: <code>separate()</code>, <code>separate_row()</code>, <code>unite()</code></p>

<div style='float:left;width:48%;'>
  
</div>
<div style='float:right;width:48%;'>
  
</div>
    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-27" style="background:;">
  <article data-timings="">
    <p>Use these functions to split or combine cells into individual, isolated
values: <code>separate()</code>, <code>separate_row()</code>, <code>unite()</code></p>

<p><img src="img/separate_unite.png" title="plot of chunk unnamed-chunk-19" alt="plot of chunk unnamed-chunk-19" width="900px" style="display: block; margin: auto;" /></p>

    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="segue" style="background:#EEC900;">
  <hgroup>
    <h1>Your turn...</h1>
  </hgroup>
  <article>
    
  </article>
</slide>
<slide class="" id="slide-29">
<hgroup>
  <h1>Try it out yourself</h1>
</hgroup>
<article data-timings="">
  <div style="background-color:#F5F5F5; text-align:left; vertical-align: middle; padding:20px 47px;">
    <pre><code class="r">df &lt;- tibble(
  sd_station = c(&quot;25_BY5&quot;, &quot;26_BMPJ2&quot;, &quot;26_J56&quot;, &quot;26_K32&quot;, 
    &quot;27_B1&quot;, &quot;28_BY15&quot;, &quot;29_F64&quot;, &quot;30_SR5&quot;, &quot;30_US5B&quot;),
  temp = c(14.1, 13.0, 15.2, 17.9, 14.8, 12.9, 12.1, 11.3, 11.1)
)

df_split &lt;- separate(df, sd_station, into = c(&quot;sd&quot;, &quot;station&quot;))

df_join &lt;- unite(df_split, sd, station, col = &quot;sd_station&quot;, sep = &quot;/&quot;)
</code></pre>

  </div>
  <footer>
    <div style="position: absolute; left: 60px; top: 645px; z-index:100">
      <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
    </div>
    <div style="position: absolute; left: 100px; top: 650px; z-index:100">
      <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
      font-style: italic; top: 610px; ">Data analysis with R</a>
    </div>
  </footer>
</article>
<!-- Presenter Notes -->
</slide>

<style>
#slide-29 {
  background-color: #EEC900;
}
</style>
<slide class="" id="slide-30">
<hgroup>
  <h1>Quiz 3: Separating and uniting cells</h1>
</hgroup>
<article data-timings="">
  <div style="background-color:#F5F5F5; text-align:left; vertical-align: middle; padding:20px 47px;">
    <p>What do the extra and fill arguments do in <code>separate()</code>? Experiment with the various options for the following two toy datasets.</p>

<pre><code class="r">df1 &lt;- tibble(x = c(&quot;a,b,c&quot;, &quot;d,e,f,g&quot;, &quot;h,i,j&quot;)) 
separate(df1, x, c(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;), remove =F)

df2 &lt;- tibble(x = c(&quot;a,b,c&quot;, &quot;d,e&quot;, &quot;f,g,i&quot;))
separate(df2, x, c(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;))
</code></pre>

<p><small>(The solution is at the end of the presentation.)</small></p>

  </div>
  <footer>
    <div style="position: absolute; left: 60px; top: 645px; z-index:100">
      <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
    </div>
    <div style="position: absolute; left: 100px; top: 650px; z-index:100">
      <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
      font-style: italic; top: 610px; ">Data analysis with R</a>
    </div>
  </footer>
</article>
<!-- Presenter Notes -->
</slide>

<style>
#slide-30 {
  background-color: #EEC900;
}
</style>
<slide class="" id="slide-31" style="background:#EEC900;">
  <hgroup>
    <h1>Quiz 4: Separating and uniting cells</h1>
  </hgroup>
  <article data-timings="">
    
<div class="quiz quiz-single well ">
  <p>Both <code>unite()</code> and <code>separate()</code> have a remove argument. What does it do? </p>

<ol>
<li>It removes extra values.</li>
<li>It removes the column names.</li>
<li><em>It removes the original colum.</em></li>
<li>It removes special characters in the separating column.</li>
</ol>

<p>Why would you set it to <code>FALSE</code>?</p>

  <button class="quiz-submit btn btn-primary">Submit</button>
  <button class="quiz-toggle-hint btn btn-info">Show Hint</button>
  <button class="quiz-show-answer btn btn-success">Show Answer</button>
  <button class="quiz-clear btn btn-danger">Clear</button>
  
  <div class="quiz-hint">
  <p><small>Look into the help <code>?separate</code> and play with the argument and the above toy datasets.</small></p>

</div>
</div>
    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="segue" style="background:#1E90FF;">
  <hgroup>
    <h1><small>2. Tidy data</small> - Handling missing values and other replacements</h1>
  </hgroup>
  <article>
    <p><img src="img/Data_science_1a.png" style="height:150px;border:0;position: absolute; left: 900px; top: 50px" </img> </p>

  </article>
</slide>
<slide class="" id="slide-33" style="background:;">
  <hgroup>
    <h2>Handling missing values (NAs)</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><strong>Leave them</strong> in and <strong>accomodate algorithm</strong> to missing data, e.g. missing values are skipped during calculations like &quot;pairwise deletion&quot;; can cause problems</li>
<li><strong>Delete</strong> rows/columns</li>
<li><strong>Interpolate</strong> missing values

<ul>
<li>replace NAs by <strong>mean/median</strong> (advantage median: distribution can be skewed)</li>
<li>replace NAs by <strong>regression</strong> (linear interpolation)</li>
</ul></li>
</ul>

    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-34" style="background:;">
  <hgroup>
    <h2>Checking for NAs</h2>
  </hgroup>
  <article data-timings="">
    <p>You can apply the function <code>is.na()</code> to single vectors and <strong>single variables in a data frame</strong> as you learned in lecture 2. Here an example with the ICES dataset</p>

<pre><code class="r">is.na(hydro$temp)
</code></pre>

<pre><code class="no-highlight">##    [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##   [12] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##   [23] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE
##   [34] FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##   [45]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##   [56]  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##   [67] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##   [78] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE  TRUE
##   [89] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [100] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [111] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [122] FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [133]  TRUE  TRUE  TRUE  TRUE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE
##  [144] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE
##  [155] FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE
##  [166] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE
##  [177] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [188] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [199] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [210] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [221] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [232] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [243] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [254] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [265] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [276] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [287] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [298] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [309] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [320] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [331] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [342] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [353] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [364] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [375] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [386] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [397] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [408] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [419] FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [430] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [441] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [452] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [463] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [474] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [485] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [496] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [507] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [518] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [529] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [540] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [551] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [562] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [573] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [584] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [595] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [606] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [617] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [628] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [639] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [650] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [661] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [672] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [683] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [694] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [705] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [716] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [727] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [738] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [749] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [760] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [771] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [782] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [793] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [804] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [815] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [826] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [837] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [848] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [859] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [870] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [881] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [892] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [903] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [914] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [925] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [936] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [947] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [958] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [969] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [980] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [991] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [ reached getOption(&quot;max.print&quot;) -- omitted 29012 entries ]
</code></pre>

    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-35" style="background:;">
  <hgroup>
    <h3>..... Puh!</h3>
  </hgroup>
  <article data-timings="">
    <p>Remember, the <code>is.na()</code> function returns a logical vector of the <strong>same length then the original vector</strong> (which has, in our case, <strong>30012</strong> values!). </p>

<p>BETTER: If you wrap the function by the <code>sum()</code>function, you can calculate the sum of all TRUEs in this vector:</p>

<div style='float:left;width:48%;'>
  <pre><code class="r">sum(is.na(hydro$temp))
</code></pre>

<pre><code class="no-highlight">## [1] 1714
</code></pre>

<pre><code class="r">sum(is.na(hydro$psal))
</code></pre>

<pre><code class="no-highlight">## [1] 2382
</code></pre>

</div>
<div style='float:right;width:48%;'>
  <p>You can do the same with the entire data frame</p>

<pre><code class="r">sum(is.na(hydro))
</code></pre>

<pre><code class="no-highlight">## [1] 13809
</code></pre>

</div>
    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-36" style="background:;">
  <hgroup>
    <h3>A shortcut to check NAs in all variables</h3>
  </hgroup>
  <article data-timings="">
    <p>A very fast way to see whether and how many NAs you have in a dataframe is to use the <code>summary()</code> function, which displays not only some <strong>descriptive statistics</strong> but also the <strong>number of NAs</strong>:</p>

<pre><code class="r">summary(hydro[ ,9:11]) # for display purposes I selected not all columns
</code></pre>

<pre><code class="no-highlight">##       temp             psal             doxy       
##  Min.   :-0.700   Min.   : 0.065   Min.   : 0.000  
##  1st Qu.: 4.200   1st Qu.: 6.548   1st Qu.: 5.870  
##  Median : 6.067   Median : 7.430   Median : 6.960  
##  Mean   : 7.668   Mean   : 8.082   Mean   : 6.493  
##  3rd Qu.:10.500   3rd Qu.: 8.436   3rd Qu.: 8.200  
##  Max.   :24.400   Max.   :34.016   Max.   :11.760  
##  NA&#39;s   :1714     NA&#39;s   :2382     NA&#39;s   :7304
</code></pre>

    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-37" style="background:;">
  <hgroup>
    <h3>tidyr provides 3 useful functions for handling NAs</h3>
  </hgroup>
  <article data-timings="">
    
<div style='float:left;width:48%;'>
  <ol>
<li><code>drop_na(data, ...)</code>: Drops entire rows containing missing values. </li>
<li><code>fill(data, ..., .direction = c(&quot;down&quot;, &quot;up&quot;))</code>: Fills missing values in using the previous  (direction = &quot;down&quot;) or following (direction = &quot;up&quot;) entry. Useful if only values that change are recorded.</li>
<li><code>replace_na(data, replace = list(), ...)</code>: Replaces missing values with a value specified for each column.</li>
</ol>

</div>
<div style='float:right;width:48%;'>
  <p><img src="img/tidyr_NAs.png" title="plot of chunk unnamed-chunk-27" alt="plot of chunk unnamed-chunk-27" width="400px" style="display: block; margin: auto;" /></p>

</div>
    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-38" style="background:;">
  <hgroup>
    <h2>Replacing (single) values other than NAs</h2>
  </hgroup>
  <article data-timings="">
    <p>Use the indexing rules and operators for subsetting you&#39;ve learned so far:</p>

<pre><code class="r">cruise &lt;- tibble(pressure = 1:5, station_1 = c(4.1,4.0,4.0,3.9,33.8),
  station_2 = c(-5.3,-5.4,5.2,5.0,4.9))
</code></pre>

    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-39" style="background:;">
  <hgroup>
    <h2>Replacing (single) values other than NAs</h2>
  </hgroup>
  <article data-timings="">
    <p>Use the indexing rules and operators for subsetting you&#39;ve learned so far:</p>

<pre><code class="r">cruise &lt;- tibble(pressure = 1:5, station_1 = c(4.1,4.0,4.0,3.9,33.8),
  station_2 = c(-5.3,-5.4,5.2,5.0,4.9))
</code></pre>

<div style='float:left;width:48%;'>
  <ol>
<li>Replace a <strong>single</strong> value, e.g. set an extreme value to NA so it gets excluded in the analysis:</li>
</ol>

<pre><code class="r"># if you know the row of the outlier
cruise$station_1[5] &lt;- NA
</code></pre>

</div>
<div style='float:right;width:48%;'>
  <ol>
<li>Replace <strong>all</strong> negative temperature values with NAs (might be typing or measurement errors)</li>
</ol>

<pre><code class="r">cruise$station_2[
  cruise$station_2 &lt; 0] &lt;- NA
# works only if you have no NAs, 
# otherwise try
cruise$station_2[
  !is.na(cruise$station_2) &amp; 
  cruise$station_2&lt; 0] &lt;- NA
</code></pre>

</div>
    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-40" style="background:;">
  <hgroup>
    <h2>Replacing (single) values other than NAs (cont)</h2>
  </hgroup>
  <article data-timings="">
    <p>A useful function to identify the position of elements in a vector for which the specified conditions holds is <code>which()</code>.
Lets identify the temperature value(s) that are equal to the maximum observed temperature value and set this/these to NA:</p>

<pre><code class="r">id &lt;- which(cruise$station_1 == max(cruise$station_1))
id
</code></pre>

<pre><code class="no-highlight">## [1] 5
</code></pre>

<pre><code class="r">cruise$station_1[id] &lt;- NA
</code></pre>

    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="segue" style="background:#EEC900;">
  <hgroup>
    <h1>Your turn...</h1>
  </hgroup>
  <article>
    
  </article>
</slide>
<slide class="" id="slide-42">
<hgroup>
  <h1>Task: Replace NAs</h1>
</hgroup>
<article data-timings="">
  <div style="background-color:#F5F5F5; text-align:left; vertical-align: middle; padding:20px 47px;">
    <p>We have the following dataset:</p>

<pre><code class="r">df &lt;- tibble(
  station = paste0(&quot;station_&quot;, 1:20), # concatenates &quot;station&quot; with the number 1 to 20
  temp = rnorm(20, mean = 14, sd = 2), # generates 20 values from a normal distribution
  sal = rnorm(20, mean = 8, sd = 0.5)
) 
random_nas &lt;- sample(1:20, 7) # samples 7 random positions
df$temp[random_nas] &lt;- NA # fill these positions in variable &#39;temp&#39; with NAs
df$sal[random_nas] &lt;- NA
</code></pre>

  </div>
  <footer>
    <div style="position: absolute; left: 60px; top: 645px; z-index:100">
      <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
    </div>
    <div style="position: absolute; left: 100px; top: 650px; z-index:100">
      <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
      font-style: italic; top: 610px; ">Data analysis with R</a>
    </div>
  </footer>
</article>
<!-- Presenter Notes -->
</slide>

<style>
#slide-42 {
  background-color: #EEC900;
}
</style>
<slide class="" id="slide-43">
<hgroup>
  <h1>Quiz 5: Replace NAs in temp</h1>
</hgroup>
<article data-timings="">
  <div style="background-color:#F5F5F5; text-align:left; vertical-align: middle; padding:20px 47px;">
    <p>Try to deal with the NAs in the variable &#39;temp&#39; in the following way:</p>

<ol>
<li>Drop all rows with NAs in &#39;temp&#39;</li>
<li>Replace NAs with the previous value</li>
<li>Replace NAs with the mean value (of the entire variable)</li>
<li>Replace NAs with -999</li>
</ol>

<p><strong>What are the consequences if you do this? What is the best option (out of the four and having the original NAs in) for which situation?</strong></p>

<p><small>As a help: calculate for each option the mean temperature and compare the results (the solution is at the end of the presentation).</small></p>

  </div>
  <footer>
    <div style="position: absolute; left: 60px; top: 645px; z-index:100">
      <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
    </div>
    <div style="position: absolute; left: 100px; top: 650px; z-index:100">
      <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
      font-style: italic; top: 610px; ">Data analysis with R</a>
    </div>
  </footer>
</article>
<!-- Presenter Notes -->
</slide>

<style>
#slide-43 {
  background-color: #EEC900;
}
</style>
<slide class="" id="slide-44">
<hgroup>
  <h1>Quiz 6: Replace NAs in temp AND sal</h1>
</hgroup>
<article data-timings="">
  <div style="background-color:#F5F5F5; text-align:left; vertical-align: middle; padding:20px 47px;">
    <p>Restore the original df (including the NAs in temp) and figure out how to change NAs (with the previous value) in both variables &#39;temp&#39; and &#39;sal&#39;  <strong>IN ONE STEP</strong>.</p>

<p>(The solution is at the end of the presentation.)</p>

  </div>
  <footer>
    <div style="position: absolute; left: 60px; top: 645px; z-index:100">
      <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
    </div>
    <div style="position: absolute; left: 100px; top: 650px; z-index:100">
      <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
      font-style: italic; top: 610px; ">Data analysis with R</a>
    </div>
  </footer>
</article>
<!-- Presenter Notes -->
</slide>

<style>
#slide-44 {
  background-color: #EEC900;
}
</style>
<slide class="" id="slide-45" style="background:;">
  <hgroup>
    <h2>Overview of more functions:</h2>
  </hgroup>
  <article data-timings="">
    <div class="img-with-text" style="position: absolute; left: 200px; top: 100px">
    <img src="img/Cheatsheet_tidyr.png" alt="" width=675px/>
 <p><span class="source-img" style = "float:right">
 Cheat sheet is freely available at 
 <a href='https://www.rstudio.com/resources/cheatsheets/' title=''>https://www.rstudio.com/resources/cheatsheets/</a></span></p>
</div>

    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="segue" style="background:#EEC900;">
  <hgroup>
    <h1>Your turn again...</h1>
  </hgroup>
  <article>
    
  </article>
</slide>
<slide class="" id="slide-47" style="background:#EEC900;">
  <hgroup>
    <h1>Let’s put together everything you’ve learned to tackle a realistic data tidying problem.</h1>
  </hgroup>
  <article data-timings="">
    <p><img src="img/Tidy_synthesis.png" title="plot of chunk unnamed-chunk-34" alt="plot of chunk unnamed-chunk-34" width="700px" style="display: block; margin: auto;" /></p>

    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-48">
<hgroup>
  <h1>Tasks</h1>
</hgroup>
<article data-timings="">
  <div style="background-color:#F5F5F5; text-align:left; vertical-align: middle; padding:20px 47px;">
    <ol>
<li>Import the hydrographical ICES dummy dataset: &quot;dummy_hydro.csv&quot;</li>
<li>Make the data tidy</li>
</ol>

<p><strong>WHAT ARE THE THINGS TO CONSIDER????</strong></p>

  </div>
  <footer>
    <div style="position: absolute; left: 60px; top: 645px; z-index:100">
      <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
    </div>
    <div style="position: absolute; left: 100px; top: 650px; z-index:100">
      <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
      font-style: italic; top: 610px; ">Data analysis with R</a>
    </div>
  </footer>
</article>
<!-- Presenter Notes -->
</slide>

<style>
#slide-48 {
  background-color: #EEC900;
}
</style>
<slide class="" id="slide-49">
<hgroup>
  <h1>Tasks</h1>
</hgroup>
<article data-timings="">
  <div style="background-color:#F5F5F5; text-align:left; vertical-align: middle; padding:20px 47px;">
    <ol>
<li>Import the hydrographical ICES dummy dataset: &quot;dummy_hydro.csv&quot;</li>
<li>Make the data tidy

<ul>
<li>Is any restructuring needed?</li>
<li>Is any separation or union needed?</li>
<li>Do you agree with the column names?</li>
<li>Are the data types correct?</li>
<li>Do you need to handle NAs?</li>
<li>Are there any awkward values in the data (potential typing errors)?</li>
</ul></li>
</ol>

  </div>
  <footer>
    <div style="position: absolute; left: 60px; top: 645px; z-index:100">
      <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
    </div>
    <div style="position: absolute; left: 100px; top: 650px; z-index:100">
      <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
      font-style: italic; top: 610px; ">Data analysis with R</a>
    </div>
  </footer>
</article>
<!-- Presenter Notes -->
</slide>

<style>
#slide-49 {
  background-color: #EEC900;
}
</style>
<slide class="segue" style="background:#E5E5E5;">
  <hgroup>
    <h2>Overview of functions you learned today</h2>
  </hgroup>
  <article>
    <p>base package: <code>is.na()</code>, <code>which()</code>, <code>summary()</code></p>

<p>tidyr package: <code>gather()</code>, <code>spread()</code>,
<code>separate()</code>, <code>separate_row()</code>, <code>unite()</code>,
<code>drop_na()</code>, <code>fill()</code>, <code>replace_na()</code></p>

  </article>
</slide>
<slide class="segue" style="background:#CD2626;">
  <hgroup>
    <h1>How do you feel now.....?</h1>
  </hgroup>
  <article>
    
  </article>
</slide>
<slide class="" id="slide-52">
  <hgroup>
    <h2>Totally confused?</h2>
  </hgroup>
  <article class = 'flexbox vcenter'>
    <p><img src="img/Comic_confused.png" title="plot of chunk unnamed-chunk-35" alt="plot of chunk unnamed-chunk-35" width="400px" style="display: block; margin: auto;" /></p>

<p>Go thorougly through the tasks and quizzes. 
Read the chapter <a href="http://r4ds.had.co.nz/tidy-data.html">12 Tidy Data</a>  in &#39;R for Data Science&#39;.</p>

    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-53">
  <hgroup>
    <h2>Totally bored?</h2>
  </hgroup>
  <article class = 'flexbox vcenter'>
    <p><img src="img/Comic_bored.png" title="plot of chunk unnamed-chunk-36" alt="plot of chunk unnamed-chunk-36" width="800px" style="display: block; margin: auto auto auto 0;" /></p>

<p>Then play around already with the full hydro dataset &quot;1111473b.csv&quot; and make it tidy.</p>

    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-54" style="background:;">
  <hgroup>
    <h2>Totally content?</h2>
  </hgroup>
  <article data-timings="">
    <p>Then go grab a coffee, lean back and enjoy the rest of the day...!</p>

<p><img src="img/Comic_hammock.png" title="plot of chunk unnamed-chunk-37" alt="plot of chunk unnamed-chunk-37" width="600px" style="display: block; margin: auto;" /></p>

    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="thank-you-slide segue" id="slide-55">
  <footer>
    <div style="position: absolute; left: 50px; top: 50px; z-index:100">
        <img src = "assets/img/uham_logo.png" height="67" width="200">
    </div>
  </footer>
  <article>
    <h1 style="padding-top: 120px;">Thank You</h1>
    <p>
      For more information contact me:<a href="saskia.otto@uni-hamburg.de">
      saskia.otto@uni-hamburg.de</a>
      </p>
      <p data-config-contact="">
      <a href="http://www.researchgate.net/profile/Saskia_Otto"
          style="color:#F48C0A; font-weight: bold;">
        http://www.researchgate.net/profile/Saskia_Otto</a><br>
      <a href="http://www.github.com/saskiaotto"
          style="color: #F48C0A; font-weight: bold;">
        http://www.github.com/saskiaotto</a>
    </p>
    <p style="font-size: 15px; position: absolute; left: 125px; top: 480px; z-index:100">
    <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
      <img alt="Creative Commons License" style="border-width:0"
        src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a><br>
        This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
        Creative Commons Attribution-ShareAlike 4.0 International License </a>except for the <br>
        borrowed and mentioned with proper <i>source:</i> statements. <br>
        <b>Image on title and end slide:</b> Section of an infrared satallite image showing the Larsen C
        ice shelf on the Antarctic <br>
        Peninsula - USGS/NASA Landsat: <a href="https://landsat.visibleearth.nasa.gov/view.php?id=90481">
        A Crack of Light in the Polar Dark</a>, Landsat 8 - TIRS, June 17, 2017 <br>
        (under CC0 license)
    </p>
  </article>
</slide>
<slide class="segue" style="background:#CD2626;">
  <hgroup>
    <h1>Solutions</h1>
  </hgroup>
  <article>
    
  </article>
</slide>
<slide class="" id="slide-57" style="background:;">
  <hgroup>
    <h2>Quiz 3: Separating and uniting cells</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>df1: row 2 has one element MORE when splitting the string into individual columns —&gt; R will return an error message and drop the extra value as default. If you want to get no warning or keep the extra value (united with the previous value) change the &#39;extra’ argument to extra = „drop“ or „merge“: </li>
</ul>

<pre><code class="r">separate(df1, x, c(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;), extra = &quot;merge&quot;)
</code></pre>

<ul>
<li>df2:  row 2 has one element LESS when splitting the string into individual columns —&gt; with the default settings (fill = „warn“) R will fill the empty element with NA from the right and return a message. If you want to fill from the left without any warning, you should change to fill = „left“:</li>
</ul>

<pre><code class="r">separate(df2, x, c(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;), fill = &quot;left&quot;)
</code></pre>

    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-58" style="background:;">
  <hgroup>
    <h2>Quiz 5: Replace NAs in temp</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r"># This would be your code:
# 1.
drop_na(df, temp)
# 2.
fill(df, temp) # default is previous value 
# 3.
temp_mean &lt;- mean(df$temp, na.rm= TRUE)
replace_na(df, list(temp = temp_mean))
# 4.
replace_na(df, list(temp = -999))
</code></pre>

<p>Some function cannot handle NAs so one way to solve the problem is to drop the entire rows that contain NAs somewhere or replace the NAs with some values such as the mean, median, or previous values:</p>

    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-59" style="background:;">
  <hgroup>
    <h2>Quiz 5: Replace NAs in temp (cont)</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><p><strong>dropping rows</strong>: a simple, clean solution that doesn’t bring any artificial information into the data. But you might loose so many rows that your sample size becomes too small. In that case, filling NAs with values is a better option.</p></li>
<li><p><strong>previous values</strong>: can be useful in time series or spatial data (including depth profiles) where values next to each other (e.g. temperatures the next day or the adjacent water depth) are likely to be similar. Problematic here is if you have large gaps, e.g. the temperature in 1m depth and then in 100m depth again. For all intermediate depths (2-99m) the values would resemble the one from 1m depth, which is highly unrealistic. In such a case, removing the entire sample might be the best choice.</p></li>
</ul>

    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-60" style="background:;">
  <hgroup>
    <h2>Quiz 5: Replace NAs in temp (cont)</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><p><strong>mean</strong>: replacing NAs with means (or medians) is a common technique, particularly if samples are not closely related (e.g. temperature measurements of stations far away from each other). But, think carefully which mean to take. The overall mean (across all samples, stations, etc)? The mean of that sample? The mean of the specific depth? The mean of the specific depth in the specific month?</p></li>
<li><p>Some datasets come with the value -999 for missing values. To be consistent you might want to do the same for other datasets. But as soon as you do any calculations, this value will be treated as a real number messing up all your results (imagine the mean of 15, 16 and -999). Always change such missing values to NAs before you do any calculation, visualisation, or modelling.</p></li>
</ul>

<p><strong>Best solution</strong>: there isn’t a best solution but a good practice is to keep your missing values as NAs and only for particular methods you deal with NAs in a way that is best suited for the type of data.</p>

    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-61" style="background:;">
  <hgroup>
    <h2>Quiz 6: Replace NAs in temp AND sal</h2>
  </hgroup>
  <article data-timings="">
    <p>If you don’t specify any variable, NAs will be replace in the entire dataset: </p>

<pre><code class="r">fill(df)  
</code></pre>

<p>If you want to make sure only in temp and sal NAs are replaced specify that:</p>

<pre><code class="r">fill(df, temp, sal)
</code></pre>

    <footer>
      <div style="position: absolute; left: 60px; top: 645px; z-index:100">
        <a class="home" href="https://mareds.github.io/r_course/"><img src="assets/img/mds_logo_128px.png" alt="Home button" style="width:35px;height:35px;border:0;"></a>
      </div>
      <div style="position: absolute; left: 100px; top: 650px; z-index:100">
        <a href='https://mareds.github.io/r_course/' style="font-size: 15px;
        font-style: italic; top: 610px; ">Data analysis with R</a>
      </div>
    </footer>
  </article>
  <!-- Presenter Notes -->
</slide>
    <slide class="backdrop"></slide>
  </slides>
  <div class="pagination pagination-small" id='io2012-ptoc' style="display:none;">
    <ul>
      <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=1 title='2. Tidy data'>
         1
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=2 title='So what is &quot;tidy&quot; data?'>
         2
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=3 title='So what is &quot;tidy&quot; data?'>
         3
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=4 title='So what is &quot;tidy&quot; data?'>
         4
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=5 title='So what is &quot;tidy&quot; data?'>
         5
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=6 title='So what is &quot;tidy&quot; data?'>
         6
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=7 title='Imagine the following crosstabulation'>
         7
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=8 title='Accessing elements in crosstabulations'>
         8
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=9 title='Accessing elements in crosstabulations'>
         9
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=10 title='Alternatively: Restructure the table'>
         10
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=11 title='Another example with the hydrographical data from ICES'>
         11
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=12 title='Another example with the hydrographical data from ICES'>
         12
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=13 title='Solution: Restructure the table again'>
         13
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=14 title='Which one do you consider tidy?'>
         14
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=15 title='Which one do you consider tidy?'>
         15
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=16 title='<small>2. Tidy data</small> - How to change between data formats?'>
         16
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=17 title='&#39;tidyr&#39; provides two functions for that:'>
         17
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=18 title='<code>gather()</code>'>
         18
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=19 title='<code>spread()</code>'>
         19
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=20 title='NA'>
         20
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=21 title='Your turn...'>
         21
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=22 title='Quiz 1: Restructuring data formats'>
         22
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=23 title='Quiz 1: Restructuring data formats'>
         23
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=24 title='Quiz 2: Restructuring data formats'>
         24
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=25 title='<small>2. Tidy data</small> - Separating and uniting cells'>
         25
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=26 title='NA'>
         26
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=27 title='NA'>
         27
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=28 title='Your turn...'>
         28
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=29 title='Try it out yourself'>
         29
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=30 title='Quiz 3: Separating and uniting cells'>
         30
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=31 title='Quiz 4: Separating and uniting cells'>
         31
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=32 title='<small>2. Tidy data</small> - Handling missing values and other replacements'>
         32
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=33 title='Handling missing values (NAs)'>
         33
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=34 title='Checking for NAs'>
         34
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=35 title='..... Puh!'>
         35
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=36 title='A shortcut to check NAs in all variables'>
         36
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=37 title='tidyr provides 3 useful functions for handling NAs'>
         37
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=38 title='Replacing (single) values other than NAs'>
         38
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=39 title='Replacing (single) values other than NAs'>
         39
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=40 title='Replacing (single) values other than NAs (cont)'>
         40
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=41 title='Your turn...'>
         41
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=42 title='Task: Replace NAs'>
         42
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=43 title='Quiz 5: Replace NAs in temp'>
         43
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=44 title='Quiz 6: Replace NAs in temp AND sal'>
         44
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=45 title='Overview of more functions:'>
         45
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=46 title='Your turn again...'>
         46
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=47 title='Let’s put together everything you’ve learned to tackle a realistic data tidying problem.'>
         47
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=48 title='Tasks'>
         48
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=49 title='Tasks'>
         49
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=50 title='Overview of functions you learned today'>
         50
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=51 title='How do you feel now.....?'>
         51
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=52 title='Totally confused?'>
         52
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=53 title='Totally bored?'>
         53
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=54 title='Totally content?'>
         54
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=55 title='NA'>
         55
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=56 title='Solutions'>
         56
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=57 title='Quiz 3: Separating and uniting cells'>
         57
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=58 title='Quiz 5: Replace NAs in temp'>
         58
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=59 title='Quiz 5: Replace NAs in temp (cont)'>
         59
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=60 title='Quiz 5: Replace NAs in temp (cont)'>
         60
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=61 title='Quiz 6: Replace NAs in temp AND sal'>
         61
      </a>
    </li>
  </ul>
  </div>  <!--[if IE]>
    <script
      src="https://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">
    </script>
    <script>CFInstall.check({mode: 'overlay'});</script>
  <![endif]-->
</body>
  <!-- Load Javascripts for Widgets -->
  <script src="libraries/widgets/quiz/js/jquery.quiz.js"></script>
<script src="libraries/widgets/quiz/js/mustache.min.js"></script>
<script src="libraries/widgets/quiz/js/quiz-app.js"></script>
<script src="libraries/widgets/bootstrap/js/bootstrap.min.js"></script>
<script src="libraries/widgets/bootstrap/js/bootbox.min.js"></script>
<script src="libraries/widgets/interactive/js/ace/js/ace.js"></script>
<script src="libraries/widgets/interactive/js/opencpu-0.5.js"></script>
<script src="libraries/widgets/interactive/js/interactive.js"></script>

  <!-- MathJax: Fall back to local if CDN offline but local image fonts are not supported (saves >100MB) -->
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true
      }
    });
  </script>
  <!-- following line slidify default but is outdated -->
  <!-- <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> -->
  
  <!-- accoding to https://www.mathjax.org/#gettingstarted  this is the line of code to
    change the version number in the src attribute any time the version of MathJax changes
    (Although this refers to a specific version, the latest.js file will load the most current version regardless of the one you specified.)
  -->
    <script type="text/javascript" src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML' async></script>
  
  <!-- <script src="https://c328740.ssl.cf1.rackcdn.com/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script> -->
  <script>window.MathJax || document.write('<script type="text/x-mathjax-config">MathJax.Hub.Config({"HTML-CSS":{imageFont:null}});<\/script><script src="libraries/widgets/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"><\/script>')
</script>
<script>  
  $(function (){ 
    $("#example").popover(); 
    $("[rel='tooltip']").tooltip(); 
  });  
  </script>  
  <!-- LOAD HIGHLIGHTER JS FILES -->
  <script src="libraries/highlighters/highlight.js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <!-- DONE LOADING HIGHLIGHTER JS FILES -->
   
  </html>